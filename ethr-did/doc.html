<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><!--This file was converted to xhtml by LibreOffice - see http://cgit.freedesktop.org/libreoffice/core/tree/filter/source/xslt for the code.--><head profile="http://dublincore.org/documents/dcmi-terms/"><meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8"/><title xml:lang="en-US">- no title specified</title><meta name="DCTERMS.title" content="" xml:lang="en-US"/><meta name="DCTERMS.language" content="en-US" scheme="DCTERMS.RFC4646"/><meta name="DCTERMS.source" content="http://xml.openoffice.org/odf2xhtml"/><meta name="DCTERMS.provenance" content="" xml:lang="en-US"/><meta name="DCTERMS.subject" content="," xml:lang="en-US"/><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" hreflang="en"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" hreflang="en"/><link rel="schema.DCTYPE" href="http://purl.org/dc/dcmitype/" hreflang="en"/><link rel="schema.DCAM" href="http://purl.org/dc/dcam/" hreflang="en"/><style type="text/css">
    @page {  }
    table { border-collapse:collapse; border-spacing:0; empty-cells:show }
    td, th { vertical-align:top; font-size:12pt;}
    h1, h2, h3, h4, h5, h6 { clear:both;}
    ol, ul { margin:0; padding:0;}
    li { list-style: none; margin:0; padding:0;}
    /* "li span.odfLiEnd" - IE 7 issue*/
    li span. { clear: both; line-height:0; width:0; height:0; margin:0; padding:0; }
    span.footnodeNumber { padding-right:1em; }
    span.annotation_style_by_filter { font-size:95%; font-family:Arial; background-color:#fff000;  margin:0; border:0; padding:0;  }
    span.heading_numbering { margin-right: 0.8rem; }* { margin:0;}
    .Preformatted_20_Text { font-size:10pt; font-family:Liberation Mono; writing-mode:page; margin-top:0in; margin-bottom:0in; }
    /* ODF styles with no properties representable as CSS */
     { }
    </style></head><body dir="ltr" style="max-width:8.2681in;margin-top:0.7874in; margin-bottom:0.7874in; margin-left:0.7874in; margin-right:0.7874in; "><p class="Preformatted_20_Text">DID and DID Document</p><p class="Preformatted_20_Text">Document is based on:</p><p class="Preformatted_20_Text">How to generate did and its document</p><p class="Preformatted_20_Text">How to add, revoke the user and generate owner</p><p class="Preformatted_20_Text">How and why we generate jwt</p><p class="Preformatted_20_Text">How to verify that jwt</p><p class="Preformatted_20_Text">Discuss on different libraries</p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text">1.How to generate did and its document</p><p class="Preformatted_20_Text">       </p><p class="Preformatted_20_Text">       1.1 How to generate did:-  </p><p class="Preformatted_20_Text">       </p><p class="Preformatted_20_Text">       did stands for decentralize identifier.  did has three parts. First is did:. Second is its method.we can create our own methopd in did.third is account address or wallet address</p><p class="Preformatted_20_Text"><span> </span></p><p class="Preformatted_20_Text"><span> ex.did:bdid:0x058c31036ef5da74516308d13aa4959669e344e1</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> Here bdid is our method name which stands for blockchain did</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> you can create did with caling the default method of the server.ts file</span></p><p class="Preformatted_20_Text"><span> </span><span> </span></p><p class="Preformatted_20_Text"><span> you can call this function with two way</span></p><p class="Preformatted_20_Text"><span> </span></p><p class="Preformatted_20_Text"><span> 1.</span><span> with the use of your wallet address,like,</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> </span><span> bDid = new BDID({</span></p><p class="Preformatted_20_Text"><span> </span><span> </span><span> provider,</span></p><p class="Preformatted_20_Text"><span> </span><span> </span><span> address: identity</span></p><p class="Preformatted_20_Text"><span> </span><span> })</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> with the use of these method you are not able to generate the jwt</span></p><p class="Preformatted_20_Text"><span> for genetareting the jwt you want to generate first signing designate with use of </span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> </span><span> var generateSigningDesignate = (await bDid.generateSigningDesignate()).kp</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> if you use this function then it add one another designate in to your public for signing </span><span> Designate.</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> 2.    with the use of generate random key pair   </span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> </span><span> const kp = await BDID.generateAddressPrivateKey()</span></p><p class="Preformatted_20_Text"><span> </span><span> plainDid = new BDID({ ...kp, provider, registry: registry.address })</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> </span></p><p class="Preformatted_20_Text"><span> </span><span> here first you want to ganarate the key value pair with any random number and than you want to call the default method of server.ts file</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> if we use this method to generate did then it automatic create signing user for you.</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> this function returns the did.and all the functionallity of the server file.</span></p><p class="Preformatted_20_Text"><span> After calling this function you want to call</span></p><p class="Preformatted_20_Text"><span> </span><span>  register({ provider, registry: registry.address })</span></p><p class="Preformatted_20_Text"> <span> this is set your ethereum address in to your did document</span></p><p class="Preformatted_20_Text"><span> </span></p><p class="Preformatted_20_Text"><span> And before generating the document you must call </span></p><p class="Preformatted_20_Text"><span> </span><span> registerResolver.default()</span></p><p class="Preformatted_20_Text"><span> bcoz, this function is call the default method of our b-did-resolver file.(more discription is below the for this file) </span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> 1.2 How to genarate did document</span></p><p class="Preformatted_20_Text"><span> </span><span> after getting the did you can generate its document.</span></p><p class="Preformatted_20_Text"><span> </span><span> Like,</span></p><p class="Preformatted_20_Text"><span> </span><span> await resolve(bDid.did)</span></p><p class="Preformatted_20_Text"><span> when you create your did at that time smart contract save your information </span><span> on-chain and off-chain with ipfs(event).And save your event and function </span><span> detail.</span></p><p class="Preformatted_20_Text"><span> And when you call the resolve function it take the data from your smart </span><span> contracts with the fromBlocks to toBlocks(previous change of the event) </span><span> and ganerate the document for you</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> It generate the document for you like this,</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text">here we are just create identity of this document.</p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text">Identity is an account identifier.</p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text">2.How to add, revoke the user and generate owner</p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> 2.1 Verify Owner:- Each identity has a single address which maintains ultimate control over it.</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text">By default,each identity is controlled by itself.</p><p class="Preformatted_20_Text">Ownership of identity is verified by calling the bDid.lookupOwner()   function.</p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> 2.2 Change Owner:- The account Owner can replace themselves at any time,by calling await bDid.changeOwner(owner)</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> After Owner change your did document look like this</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> 2.3 Add Simple Designate:- Add this Simple Designate to perform a function on behalf of an identity for specific time. Like await bDid.addDesignate(designate1, { expiresIn: 2 })</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text">here you want to pass the ethereum address as a designate1</p><p class="Preformatted_20_Text"><span> and your expiration time in milisecond</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text">An identity can add multiple delegates.</p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text">These designate is expired after 2 miliseconds.</p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> 2.4 Add Authenticated Designate:- An identity can assign signing authority to designate using this,</span></p><p class="Preformatted_20_Text"><span> await bDid.addDesignate(designate2, { designateType: Ed25519SignatureAuthentication2018, expiresIn: 10 })</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> After give it to authority our document add it in to the authentication section with its signature type.</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> Our Document look like,</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text">this authenticated designate is automatic expire after 10 miliseconds.</p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> 2.4 Revoke Simple Designate:- If you want to revoke the designate manually then you use this,await bDid.revokeDesignate(designate2)</span></p><p class="Preformatted_20_Text"/><p class="Preformatted_20_Text"><span> 2.5 Revoke Authenticated Designate:-you can also revoke the authenticated designate like this,await bDid.revokeDesignate(designate2, { designateType: Ed25519SignatureAuthentication2018 })</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> It delete the designate from public key and authentication.</span></p><p class="Preformatted_20_Text"><span> </span></p><p class="Preformatted_20_Text"><span> 2.6 Set Attribute:- An identity may need to publish some information that is only needed off-chain but still requires the security benifits of using a blockchain.</span></p><p class="Preformatted_20_Text">       </p><p class="Preformatted_20_Text">       We can set the attribute with three method, pub,auth,svc</p><p class="Preformatted_20_Text"><span> </span><span> If you use pub means it saves your data in public key.It add the publickeyBase64 instead of ethereum address in did document.</span></p><p class="Preformatted_20_Text"><span> </span><span> Ex,</span><span> await bDid.setAttribute(</span></p><p class="Preformatted_20_Text"><span> </span><span> </span><span> </span><span> 'did/pub/Ed25519/veriKey/base64',</span></p><p class="Preformatted_20_Text"><span> </span><span> </span><span> </span><span> 'Arl8MN52fwhM4wgBaO4pMFO6M7I11xFqMmPSnxRQk2tx',</span></p><p class="Preformatted_20_Text"><span> </span><span> </span><span> </span><span> 10</span></p><p class="Preformatted_20_Text"><span> </span><span> </span><span> )</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> If you use auth means it saves your data in to public key as well as authentication.</span></p><p class="Preformatted_20_Text"><span> If you use svc means service, like</span></p><p class="Preformatted_20_Text"><span> await bDid.setAttribute(</span></p><p class="Preformatted_20_Text"><span> </span><span> 'did/svc/HubService',</span></p><p class="Preformatted_20_Text"><span> </span><span> 'https://hubs.uport.me',</span></p><p class="Preformatted_20_Text"><span> </span><span> 10</span></p><p class="Preformatted_20_Text"><span> )</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> It add your service in to the document like this,</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> here type is the name of your service and serviceEndPoint is tyhe url of your service.</span></p><p class="Preformatted_20_Text">3. How and why we generate jwt</p><p class="Preformatted_20_Text"><span> 3.1 Why we generate jwt:- When we want to pass any message like {hello:’world’} from </span><span> blockchain with secure mennar then it generate the jwt for that message using bellow </span><span> process and pass it. You pass your message in this way,</span></p><p class="Preformatted_20_Text"><span> </span><span> await bDid.signJWT({ hello: 'world' })</span></p><p class="Preformatted_20_Text"><span> 3.2 How we generate jwt:- Our jwt looks like</span></p><p class="Preformatted_20_Text">eyJ0eXAiOiJKV1QiLCJhbGciOiJFZDI1NTE5In0.eyJpYXQiOjE1NjAyNTIxNTcsImhlbGxvIjoid29ybGQiLCJpc3MiOiJkaWQ6YmRpZDoweGQ0ODk0MjQ1NTZhNDEwNWY3OWZlYmViNjJhMTU5ZmEyN2MyNjE3MDMifQ.XuCTqQmGW_sA02ZrObrMKiUHg_ZTCixPJCiZ-GdpqawEdo_7Gm8om8De_tyhh2G_iRumIi0u9ZcMHOhKE0XbCQ</p><p class="Preformatted_20_Text"><span> When you watch the jwt carefully it divide with three dots</span></p><p class="Preformatted_20_Text"><span> first part of that jwt is header,header includes type of token like jwt and algoritham </span><span> name(here we use ed25519 algoritham)</span></p><p class="Preformatted_20_Text"><span> second part of jwt is denotes expiration time of that jwt, your payload(you can say that your </span><span> message),and your issuer(means your did)</span></p><p class="Preformatted_20_Text"><span> third part of jwt is signature. Signature is generated with the use of first and second part of </span><span> jwt and your signer.</span></p><p class="Preformatted_20_Text"><span> Basically signer is generated with the use of your private key, when you call the </span><span> generateSigningDesignate function.</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text">4. How to verify that jwt</p><p class="Preformatted_20_Text"><span> </span></p><p class="Preformatted_20_Text"><span> when receiver receive this jwt, he/she call the checkJwt function like,</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> </span><span> await bDid.checkJWT(signJWT,publicKeyBuffer)</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> here signJWT is your jwt, and publicKeyBuffer is the publickey in buffer which is generated at the time of generateSigningDesignate.</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text">This function returns to you the payload,your did document,issuer,signer, and jwt.</p><p class="Preformatted_20_Text">It look like,</p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text">5. Discuss on different libraries</p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> 5.1 b-did-resolver --&gt; contracts --&gt; b-did-registry.json :- This library is just the abi of our smart contract. Our smart contract has all the function which we disscuss above and all function of smart contract is emit on events.</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> 5.2 b-did-resolver --&gt; src --&gt; bdid-resolver.ts :- this library is connected with our smart contract with abi.logDecoder(DidRegistryContract, false)  line of code.All emited event is store in to logDecoder.</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> When you perform any event of the smart contract its emited event directly call default function of this file and prepare the did document for you.And when you fire resolve function it generate did document for you.</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> Its default function first match your did and then fetch the owner of the document from your contract, after fetching owner call the change log function for getting the all event history of that particular owner.And then last it call the  encloseDidDocument function which is create the structure of did document.</span></p><p class="Preformatted_20_Text"> <span> </span></p><p class="Preformatted_20_Text"><span> It has two more function bytes32toString and stringToBytes32. This is basically use to encrypt and decrypt the authentication key and verififcation key.</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> 5.3 bdid-jwt --&gt; digest.ts :- this library is only use to convert our public address in toEthereumAddress.</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> 5.4 bdid-jwt --&gt; ed25519Signer.ts :- this library is used to create signer.It takes your private key and generate the signer function using ed25519 algorithm</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> 5.5 bdid-jwt --&gt; JWT.ts :- this library is generate jwt, verify your jwt, ckeck your did.It also check your did method is write or not.resolveAuthenticator is check your did and the designate is authorized or not.</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> 5.6 bdid-jwt --&gt; signerAlgorithm.ts :- this file is used to check the algoritham is supported or not, and it also generate the signature for you by calling the signer function.</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"><span> 5.7 bdid-jwt --&gt; verifierAlgorithm.ts :- this file is used for verify our signer with the use of ed25519 algoritham.</span></p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"> </p><p class="Preformatted_20_Text"> </p></body></html>